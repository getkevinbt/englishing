import{_ as y,c as w,d as t,w as o,j as _,g as u,t as r,v as l,e as g,f as E,n as d,b as C,k as S,i as p,o as h}from"./index-Bx-6Qppa.js";const f=/^\d{6}$/,v=/^[a-zA-Z0-9.]+@([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}$/,b=/^(?!.*(?:123|234|345|456|567|678|789|890|abc|bcd|cde|def|efg|fgh|ghi|hij|ijk|jkl|klm|lmn|mno|nop|opq|pqr|qrs|rst|stu|tuv|uvw|vwx|wxy|xyz))(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])[A-Za-z\d!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]{8,}$/i,k={data(){return{code:"",codeSent:!1,email_to_resend:"",email_validated:!1,email:"",now:new Date,password_focus:!1,password:"",showPass:!1,startWaitTime:void 0,timer:null,waitDelay:6e4,wrong_code_msg:"C칩digo inv치lido",wrong_code:null,wrong_email_msg:"Email inv치lido",wrong_email:null,wrong_password_msg:"Contrase침a inv치lida",wrong_password:null}},computed:{passwordCapitalCase(){return/[A-Z]/.test(this.password)},passwordLowerCase(){return/[a-z]/.test(this.password)},passwordNumber(){return/[0-9]/.test(this.password)},passwordSequence(){return!/(?:123|234|345|456|567|678|789|890|abc|bcd|cde|def|efg|fgh|ghi|hij|ijk|jkl|klm|lmn|mno|nop|opq|pqr|qrs|rst|stu|tuv|uvw|vwx|wxy|xyz)/i.test(this.password)},passwordSpecial(){return/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(this.password)},timeRemaining(){if(!this.codeSent)return this.waitDelay;const s=this.now.getTime()-this.startWaitTime.getTime();return Math.max(0,this.waitDelay-s)},waitTime(){if(this.timeRemaining<=0)return"";const s=Math.floor(this.timeRemaining/6e4),e=Math.floor(this.timeRemaining%6e4/1e3),c=e<10?`0${e}`:e;return`(${s}:${c})`}},mounted(){this.timer=setInterval(()=>{this.now=new Date},1e3),document.querySelectorAll(".sign_up_input").forEach((s,e)=>{s.addEventListener("focus",()=>{s.classList.remove("invalid","valid"),e==0?this.wrong_email=null:e==1?this.wrong_code=null:(this.wrong_password=null,this.password_focus=!0)}),s.addEventListener("blur",()=>{e==0?this.wrong_email=this.email.length===0?null:!v.test(this.email):e==1?this.wrong_code=this.code.length===0?null:!f.test(this.code):(this.wrong_password=this.password.length===0?null:!b.test(this.password),this.password_focus=!1)})})},methods:{async action_btn(){if(this.email_validated){if(this.wrong_password_msg="Contrase침a inv치lida",this.wrong_password=!b.test(this.password),this.wrong_password)return;try{const{status:s}=await p.signUpPassword({email:this.email,password:this.password});s===201&&this.$router.replace({name:"login"})}catch(s){const{status:e}=s?.response;e===400?(this.code="",this.codeSent=!1,this.email="",this.email_to_resend="",this.email_validated=!1,this.now=new Date,this.password="",this.showPass=!1,this.startWaitTime=void 0,this.timer=null,this.waitDelay=6e4,this.wrong_code=null,this.wrong_code_msg="C칩digo inv치lido",this.wrong_email=null,this.wrong_email_msg="Email inv치lido",this.wrong_password=null,this.wrong_password_msg="Contrase침a inv치lida",document.querySelectorAll(".sign_up_input").forEach(c=>{c.classList.remove("invalid","valid")})):console.error(s)}}else if(this.codeSent){if(this.wrong_code_msg="C칩digo inv치lido",this.wrong_code=!f.test(this.code),this.wrong_code)return;try{const{status:s}=await p.signUpCode({email:this.email,code:this.code});s===200&&(this.email_validated=!0)}catch(s){s&&s.response&&s.response.status===406?(this.wrong_code_msg="C칩digo incorrecto",this.wrong_code=!0):console.error(s)}}else{if(this.wrong_email_msg="Email inv치lido",this.wrong_email=!v.test(this.email),this.wrong_email)return;try{const{status:s}=await p.signUpEmail({email:this.email});s===200&&(this.email_to_resend=this.email,this.startWaitTime=new Date,this.codeSent=!0)}catch(s){const{data:{errors:e},status:c}=s?.response;if(c===400){let m=!1;e.forEach(a=>{a?.msg==="email used"&&(this.wrong_email_msg="Email en uso",this.wrong_email=!0,m=!0)}),m||console.error(s)}else console.error(s)}}},async resend_code(){try{const{status:s}=await p.signUpEmail({email:this.email_to_resend});s===200&&(this.startWaitTime=new Date)}catch(s){console.error(s)}}},beforeUnmount(){this.timer&&clearInterval(this.timer)},watch:{wrong_email(s){document.getElementById("email").classList.add(s===!0?"invalid":s===!1?"valid":null)},wrong_code(s){document.getElementById("code").classList.add(s===!0?"invalid":s===!1?"valid":null)},wrong_password(s){document.getElementById("password").classList.add(s===!0?"invalid":s===!1?"valid":null)}}},x={class:"container"},q={class:"sign_up_msg"},A={class:"input_container email_container"},D={class:"top_container"},R={class:"input_container code_container"},z={class:"top_container"},L=["disabled"],T={class:"input_container password_container"},U={class:"top_container"},V=["type"],I={class:"bottom_container"},M={class:"password_requirements_container"},N={class:"resend_container"},P={key:0,class:"resend_countdown"};function j(s,e,c,m,a,n){return h(),w("form",x,[t("div",{onClick:e[0]||(e[0]=u(i=>s.$router.back(),["stop"])),class:"back_btn"},[...e[7]||(e[7]=[t("p",null,[t("span",{class:"material-symbols-rounded"}," arrow_back_ios "),_("Atr치s ")],-1)])]),e[13]||(e[13]=t("h1",{class:"sign_up_title"},"Registro",-1)),t("h6",q,[_(r(a.email_validated?"Ingresa una contrase침a!":a.codeSent?"Valida tu email!":"Aqu칤 empieza!")+" ",1),t("b",null,r(a.email_validated?"游댐":a.codeSent?"游닐":"游"),1),_(" "+r(a.email_validated?"Casi terminas!":a.codeSent?"Es por seguridad!":"Reg칤strate para iniciar!"),1)]),o(t("div",A,[t("div",D,[e[8]||(e[8]=t("h3",{class:"header"},"Email",-1)),o(t("p",{class:"wrong_msg"},r(a.wrong_email_msg),513),[[l,a.wrong_email]])]),o(t("input",{class:"email_input sign_up_input",id:"email",type:"email","onUpdate:modelValue":e[1]||(e[1]=i=>a.email=i)},null,512),[[g,a.email]])],512),[[l,!a.email_validated]]),o(t("div",R,[t("div",z,[e[9]||(e[9]=t("h3",{class:"header"},"C칩digo de Validaci칩n",-1)),o(t("p",{class:"wrong_msg"},r(a.wrong_code_msg),513),[[l,a.wrong_code]])]),o(t("input",{disabled:!a.codeSent,class:"code_input sign_up_input",id:"code",type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>a.code=i)},null,8,L),[[g,a.code]])],512),[[l,!a.email_validated]]),o(t("div",T,[t("div",U,[e[10]||(e[10]=t("h3",{class:"header"},"Contrase침a",-1)),o(t("p",{class:"wrong_msg"},r(a.wrong_password_msg),513),[[l,a.wrong_password]])]),o(t("input",{type:a.showPass?"text":"password",class:"password_input sign_up_input",id:"password",ref:"password_input","onUpdate:modelValue":e[3]||(e[3]=i=>a.password=i)},null,8,V),[[E,a.password]]),t("div",I,[t("p",{onClick:e[4]||(e[4]=u(i=>a.showPass=!a.showPass,["stop"])),class:"display_pass"},r(a.showPass?"Ocultar":"Mostrar")+" Contrase침a ",1)])],512),[[l,a.email_validated]]),o(t("div",M,[t("p",{class:d(["password_requirement",{stroked:a.password.length>=8}])}," Longitud m칤nima de 8 ",2),t("p",{class:d(["password_requirement",{stroked:n.passwordLowerCase}])}," Al menos una min칰scula ",2),t("p",{class:d(["password_requirement",{stroked:n.passwordCapitalCase}])}," Al menos una may칰scula ",2),t("p",{class:d(["password_requirement",{stroked:n.passwordNumber}])}," Al menos un n칰mero ",2),t("p",{class:d(["password_requirement",{stroked:n.passwordSpecial}])},[...e[11]||(e[11]=[C(' Al menos un caracter especial <span class="info_icon material-symbols-rounded" data-v-cf17a0b2> info <p class="characters_container" data-v-cf17a0b2><span data-v-cf17a0b2>!</span><span data-v-cf17a0b2>@</span><span data-v-cf17a0b2>#</span><span data-v-cf17a0b2>$</span><span data-v-cf17a0b2>%</span><span data-v-cf17a0b2>^</span><span data-v-cf17a0b2>&amp;</span><span data-v-cf17a0b2>*</span><span data-v-cf17a0b2>(</span><span data-v-cf17a0b2>)</span><span data-v-cf17a0b2>_</span><span data-v-cf17a0b2>+</span><span data-v-cf17a0b2>-</span><span data-v-cf17a0b2>=</span><span data-v-cf17a0b2>[</span><span data-v-cf17a0b2>]</span><span data-v-cf17a0b2>{</span><span data-v-cf17a0b2>}</span><span data-v-cf17a0b2>;</span><span data-v-cf17a0b2>&#39;</span><span data-v-cf17a0b2>:</span><span data-v-cf17a0b2>&quot;</span><span data-v-cf17a0b2>\\</span><span data-v-cf17a0b2>|</span><span data-v-cf17a0b2>,</span><span data-v-cf17a0b2>.</span><span data-v-cf17a0b2>&lt;</span><span data-v-cf17a0b2>&gt;</span><span data-v-cf17a0b2>/</span><span data-v-cf17a0b2>?</span></p></span>',2)])],2),t("p",{class:d(["password_requirement",{stroked:n.passwordSequence&&(a.password.length!==0||a.password_focus)}])}," No contiene secuencias como 'abc' o '123' ",2)],512),[[l,a.email_validated]]),t("div",{onClick:e[5]||(e[5]=(...i)=>n.action_btn&&n.action_btn(...i)),class:"sign_up_btn btn"},r(a.email_validated?"Enviar":a.codeSent?"Comprobar":"Enviar")+" "+r(a.email_validated?"contrase침a":"c칩digo"),1),o(t("div",N,[e[12]||(e[12]=t("p",{class:"resend_label"},"No lo recibiste?",-1)),t("p",{onClick:e[6]||(e[6]=u((...i)=>n.resend_code&&n.resend_code(...i),["stop"])),class:d(["resend_btn",{disable:n.timeRemaining>0}])}," Enviar otra vez ",2),n.timeRemaining>0?(h(),w("p",P,r(n.waitTime),1)):S("",!0)],512),[[l,a.codeSent&&!a.email_validated]])])}const W=y(k,[["render",j],["__scopeId","data-v-cf17a0b2"]]);export{W as default};
