import{_,m as E,l as I,u as a,c,d,t as x,g as B,q as y,o,z as w,k as l,a as m,r as h,F as C,A as U,B as k,y as g,C as z,p as H}from"./index-Bx-6Qppa.js";import{U as N}from"./UnitButtonComponent-B-7UPn6p.js";const b={beforeMount(){this.exercise=this.getExercise(this.unitId,this.exerciseId)},components:{},computed:{...I(a,["user","openedExercise","exercises"])},data(){return{exercise:null}},methods:{...E(a,["getExercise"]),navigate(){this.$router.push({name:"single-exercise-view",params:{type:this.exercise.type,exerciseId:this.exercise.id}})}},name:"ExerciseButtonComponent",props:{index:{type:Number,required:!0},unitId:{type:String,required:!0},exerciseId:{type:String,required:!0}}},P={class:"index"},q={class:"group"},V={class:"thematic"},$={class:"type"};function T(e,t,s,u,i,r){return o(),c("div",{class:"exercise_container",style:y({"--difficulty-color":i.exercise.difficulty==="easy"?"#84cd74":i.exercise.difficulty==="medium"?"#a7a56c":"#c76565"}),onClick:t[0]||(t[0]=B((...n)=>r.navigate&&r.navigate(...n),["stop"]))},[d("p",P,x(s.index+1),1),d("div",q,[d("h6",V,x(i.exercise.thematic),1),d("p",$,x(i.exercise.type),1)])],4)}const W=_(b,[["render",T],["__scopeId","data-v-e85b414c"]]),A={async created(){try{const{data:{unit:{exercises:e}}}=await k.getUnitById(await g(),this.unitId),t=(await Promise.all(e.map(async s=>({...await z.getExerciseById(await g(),s.kind,s.item)})))).map(({data:s})=>({...s}));this.setExercises(this.unitId,t.map(({progress:s,completed:u,type:i,...r})=>({...r,type:i,toShow:i==="WordScramble"?s.map(n=>n.unplaced.length!==0?[...n.unplaced]:[...n.placed]):null}))),this.setProgress(this.unitId,t.map(({id:s,progress:u,completed:i,type:r})=>({completed:i,id:s,progress:u,type:r})))}catch(e){console.error("Error fetching exercises:",e)}},components:{ExerciseButtonComponent:W,UnitButtonComponent:N},computed:{...w(a,["units","exercises","solutionProgress"]),...I(a,["getExercisesByUnit","getExerciseProgress","openedExercise","openedUnit"]),getUnitExercises(){return this.exercises?this.exercises[this.$props.unitId]:null},unitData(){return this.units.find(e=>e.id===this.$props.unitId)},currentExerciseCompleted(){return this.openedExercise&&this.solutionProgress?.[this.unitId]?.[this.openedExercise]?.completed||!1},currentExerciseIndex(){return this.openedExercise?this.getExercisesByUnit(this.unitId).findIndex(t=>t.id===this.openedExercise):-1}},data(){return{unitHeaderSize:{height:0,width:0}}},name:"UnitViewComponent",methods:{...E(a,["setExercises","setProgress","switchOpenedExercise"]),setUnitHeaderSize(e,t){this.unitHeaderSize={height:e,width:t}},getExerciseId(){return this.$router.currentRoute._value.params.exerciseId||null},goToNextExercise(){const e=this.getExercisesByUnit(this.unitId),t=this.currentExerciseIndex+1;t<e.length&&this.switchOpenedExercise(e[t].id)}},mounted(){},props:{unitId:{type:String,required:!0}}},D={class:"container"},F={key:0,class:"loader_container"},G={class:"unit_header"},L={class:"scroller"};function M(e,t,s,u,i,r){const n=h("UnitButtonComponent"),f=h("ExerciseButtonComponent"),v=h("router-view");return o(),c("div",D,[e.getExercisesByUnit(e.$props.unitId)===null?(o(),c("div",F," Loading... ")):l("",!0),e.openedExercise?l("",!0):(o(),c("div",{key:1,class:"scroller_container",style:y({"--unitHeaderHeight":i.unitHeaderSize.height+"px","--unitHeaderWidth":i.unitHeaderSize.width+"px"})},[d("div",G,[m(n,{unitId:s.unitId,header:!0,onGetSize:r.setUnitHeaderSize},null,8,["unitId","onGetSize"])]),d("div",L,[(o(!0),c(C,null,U(e.getExercisesByUnit(e.$props.unitId),(p,S)=>(o(),H(f,{key:p.id,unitId:s.unitId,index:S,exerciseId:p.id},null,8,["unitId","index","exerciseId"]))),128))])],4)),m(v),r.currentExerciseCompleted?(o(),c("div",{key:2,class:"next-exercise-button",onClick:t[0]||(t[0]=(...p)=>r.goToNextExercise&&r.goToNextExercise(...p))}," Next ")):l("",!0)])}const j=_(A,[["render",M],["__scopeId","data-v-63817a3a"]]);export{j as default};
